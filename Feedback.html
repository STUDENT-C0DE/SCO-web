<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width-device-width, initial-scale=1">
    <title>BTTHS Student Council Organization</title>
    <link rel="stylesheet" href="style_Feedback.css">
    <link rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css" 
      integrity="sha512-2SwdPD6INVrV/lHTZbO2nodKhrnDdJK9/kg2XD1r9uGqPo1cUbujc+IYdlYdEErWNu69gVcYgdxlmVmzTWnetw==" 
      crossorigin="anonymous" 
      referrerpolicy="no-referrer" 
    />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Merriweather">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Aleo">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato">
  </head>
  <body>
    <nav>
        <ul>
            <li><div><a href="index.html"><img src="images/BTTHS_logo.png" class="mini_logo"></a></div></li>
            <li class="no-interaction"><a href="#">Student Council Organization</a></li> 
            <li><a href="About_Us.html"><i class="fa-solid fa-circle-info" ></i><span class="Nav-text">About Us</span></a></li>
            <li><a href="Representatives.html"><i class="fa-solid fa-people-group" ></i><span class="Nav-text">Representatives</span></a></li>
            <li><a href="FAQ.html"><i class="fa-solid fa-clipboard-question" ></i><span class="Nav-text">FAQ</span></a></li>
            <li><a href="Feedback.html"><i class="fa-solid fa-comment-dots" ></i><span class="Nav-text">Feedback</span></a></li>
        </ul>

    </nav>

    <h1 class="header">The SCO needs your help</h1>
    <p class="words">The SCO handles events and announcements for the Tay Tungians and we need your suggestions and opinions on how we run things. With your ideas, we can help host more inclusive and entertaining events and/or announcements that will benefit everyone and bring us closer to great harmony.</p>
    <div class="contact-container">
      <iframe name="hidden_iframe" style="display:none;"></iframe>

      <form id="feedbackForm"
            method="POST"
            action="https://script.google.com/macros/s/AKfycbxOezSCEkMijAtZWDULgZ0o_UTi40ptBbmnoFqzgrGu87Otv2v08TUc73Wjw4DXIYPP/exec"
            target="hidden_iframe"
            class="contact-left">

        <input type="text" name="grade" placeholder="Your Grade (optional)" class="contact-inputs">
        <input type="text" name="name" placeholder="Your Name (optional)" class="contact-inputs">
        <input type="email" name="userEmail" placeholder="Your School Email"
              class="contact-inputs" required pattern=".*@btths\.edu\.ph">
        <textarea name="feedback" placeholder="Your Feedback"
                  class="contact-inputs" required></textarea>

        <button type="submit">
          Submit <i class="fa fa-paper-plane"></i>
        </button>
      </form>

      <div id="trackingIDContainer"></div>
    </div>

    <div class="checking">
      <div>
        <h2>Check Feedback Status</h2>
        <input type="text" id="checkID" placeholder="Enter your Tracking ID">
        <button id="checkStatusBtn">Check Status</button>
        <p id="statusResult"></p>
      </div>
    </div>
    <br>
    <script>
    let formSubmitted = false;
    const form = document.getElementById('feedbackForm');

    form.addEventListener('submit', function(e) {
      e.preventDefault();

      const formData = new FormData(form);

      fetch(form.action, {
        method: 'POST',
        body: formData
      })
      .then(res => res.text())
      .then(trackingID => {
        document.getElementById('trackingIDContainer').textContent =
          "Submission successful! Tracking ID: " + trackingID;
        form.reset();
      })
      .catch(err => {
        document.getElementById('trackingIDContainer').textContent =
          "Submission failed.";
        console.error(err);
      });
    });

    // STATUS CHECKER
    document.getElementById('checkStatusBtn').addEventListener('click', function() {
      const trackingID = document.getElementById('checkID').value.trim();
      if (!trackingID) {
        alert("Enter your Tracking ID.");
        return;
      }

      fetch("https://script.google.com/macros/s/AKfycbxOezSCEkMijAtZWDULgZ0o_UTi40ptBbmnoFqzgrGu87Otv2v08TUc73Wjw4DXIYPP/exec?id=" + encodeURIComponent(trackingID))
        .then(res => res.text())
        .then(status => {
          document.getElementById('statusResult').textContent =
            "Status: " + status;
        })
        .catch(() => {
          document.getElementById('statusResult').textContent =
            "Unable to check status.";
        });
    });
    </script>
  </body>
</html>
    
